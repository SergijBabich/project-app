(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{130:function(e,t,n){e.exports={sidebar:"sidebar_sidebar__Y80ct",active:"sidebar_active__2zaX5"}},131:function(e,t,n){e.exports={settings:"settings_settings__132Wp"}},136:function(e,t,n){e.exports=n(262)},141:function(e,t,n){},142:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),c=n(20),i=n.n(c),l=(n(141),n(22)),s=(n(142),n(21)),u=n(287),m=n(286),d=n(57),p=n(72),_=n.n(p),f=function(e){e.input;var t=e.meta,n=(e.child,Object(d.a)(e,["input","meta","child"])),a=t.touched&&t.error;return o.a.createElement("div",{className:_.a.form_control+" "+(a?_.a.error:"")},o.a.createElement("div",null,n.children),o.a.createElement("div",null,a&&o.a.createElement("span",{className:_.a.error},t.error)))},j=function(e){var t=e.input,n=(e.meta,e.child,Object(d.a)(e,["input","meta","child"]));return o.a.createElement(f,e," ",o.a.createElement("input",Object.assign({},t,n))," ")},g=function(e){var t=e.input,n=(e.meta,e.child,Object(d.a)(e,["input","meta","child"]));return o.a.createElement(f,e," ",o.a.createElement("textarea",Object.assign({},t,n))," ")},E=function(e){if(!e)return"Field is required"},b=function(e){return e?e!==e.replace(/[^A-Za-z]/gi,"")?"must contain only English letters":void 0:"Field is required"},v=n(10),h=n(54),w=n.n(h),S=(a=4,function(e){if(e.length<a)return"Min length is ".concat(a," symbols")}),O=Object(m.a)({form:"login-form"})((function(e){var t=Object(v.f)();return e.currentToken&&t.push("/main/projects"),o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:w.a.login__form,onSubmit:e.handleSubmit},e.login?o.a.createElement("h3",null,"Welcome ",e.login):o.a.createElement("h3",null,"Log In"),!e.login&&o.a.createElement(u.a,{component:j,validate:[E],name:"login",placeholder:"Enter login"}),o.a.createElement(u.a,{component:j,validate:[E,S],type:"password",name:"password",placeholder:"Enter password"}),o.a.createElement("button",null," Submit")))})),k=n(13),N=n.n(k),x=n(29),y=n(24),C=n(129).create({baseURL:"https://project23e.herokuapp.com/"}),F=function(e,t){return C.get("/get-users?login=".concat(e,"&password=").concat(t),{login:e,password:t}).then((function(e){return e.data}),(function(e){return e}))},L=function(e,t,n){return C.post("create-new-project/".concat(n),{title:e,description:t,token:n}).then((function(e){return e.data}))},I=function(e,t,n,a){return C.put("user-ptoject/".concat(n),{title:e,description:t,token:a}).then((function(e){return e.data}))},T=function(e){return C.get("/user-ptojects?token=".concat(e),{token:e}).then((function(e){return e.data}))},U=function(e,t){return C.delete("/delete-project/?id=".concat(e,"&token=").concat(t)).then((function(e){return e.data}))},P={token:null,status:null,sendCode:null,login:null,errorCode:null},V=function(e){return{type:"SET-USER-DATA",data:e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-USER-DATA":return Object(y.a)(Object(y.a)({},e),{},{token:t.data.token,status:t.data.status,login:t.data.login,errorCode:t.data.sendCode});default:return e}},A=Object(s.b)((function(e){return{token:e.login.token,status:e.login.status,login:e.login.login,errorCode:e.login.errorCode}}),{sendFormForAuthorization:function(e,t){return function(){var n=Object(x.a)(N.a.mark((function n(a){var r;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,F(e,t);case 2:r=n.sent,a(V(r));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t,n=Object(v.f)(),a=JSON.parse(localStorage.getItem("state"));a&&(t=a.login.token);return o.a.createElement("div",{className:w.a.form},o.a.createElement(O,{currentToken:t,login:e.login,errorCode:e.errorCode,onSubmit:function(t){e.login||e.sendFormForAuthorization(t.login,t.password),e.login&&(e.sendFormForAuthorization(e.login,t.password),setTimeout((function(){return n.push("/main/projects")}),150))}}),e.errorCode&&o.a.createElement("div",{className:w.a.message},e.errorCode))})),R=n(18),D=n(130),J=n.n(D),B=function(){return o.a.createElement("nav",null,o.a.createElement("div",{className:J.a.sidebar},o.a.createElement(R.b,{to:"/main/projects",activeClassName:"selected"},"My projects "),o.a.createElement(R.b,{to:"/main/create-project",activeClassName:"selected"},"Create project"),o.a.createElement(R.b,{to:"/login",activeClassName:"selected"},o.a.createElement("div",{onClick:function(){localStorage.clear()}},"Log Out")),o.a.createElement(R.b,{to:"/main/settings",activeClassName:"selected"},"Settings")))},G=n(44),z=n.n(G),q=Object(m.a)({form:"description"})((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:z.a.form,onSubmit:e.handleSubmit},o.a.createElement("h1",null,"Enter description "),o.a.createElement(u.a,{component:g,cols:"40",rows:"10",className:z.a.textarea,validate:[E],name:"description"}),o.a.createElement("button",null," Submit")))})),X=Object(m.a)({form:"title"})((function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:z.a.form,onSubmit:e.handleSubmit},o.a.createElement("h3",null,"Enter title"),o.a.createElement(u.a,{component:j,validate:[E,b],name:"title",placeholder:"String from soung"}),o.a.createElement("button",null," Next "),e.checkTtitle&&o.a.createElement("div",{className:z.a.error},"this title already exist ")))})),Z={projectId:null},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-PROJECT-ID":return{projectId:t.projectId};default:return e}},H=Object(s.b)((function(e){return{token:e.login.token,projectId:e.projectCreator.projectId,projectsList:e.projects.projectsList}}),{createUsersProject:function(e,t,n){return function(){var a=Object(x.a)(N.a.mark((function a(r){var o;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log(e,t,n),a.next=3,L(e,t,n);case 3:o=a.sent,r({type:"SET-PROJECT-ID",projectId:o.projectId});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=Object(r.useState)(1),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(null),s=Object(l.a)(i,2),u=s[0],m=s[1],d=Object(r.useState)(!1),p=Object(l.a)(d,2),_=p[0],f=p[1],j=Object(v.f)(),g=function(t){m(t.title),e.projectsList.find((function(e){return e.title===t.title}))?f(!0):c(a+1)},E=function(t){e.createUsersProject(u,t.description.trim(),e.token),c(a+1)};if(3===a&&setTimeout((function(){return j.push("/main/projects")}),2e3),!e.token)return o.a.createElement(v.a,{to:"/login"});return o.a.createElement(o.a.Fragment,null,function(){switch(a){case 1:return o.a.createElement(X,{checkTtitle:_,onSubmit:g});case 2:return o.a.createElement(q,{onSubmit:E});default:return o.a.createElement("div",null,"\u041f\u0440\u043e\u0435\u043a\u0442 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")}}())})),K=n(8),Y=n.n(K),Q=function(e){return o.a.createElement("div",{className:Y.a.modal},o.a.createElement("div",{className:Y.a.modal__window},o.a.createElement("div",{className:Y.a.window__title},o.a.createElement("h3",null,"Do you really wanna delete the project")),o.a.createElement("div",{className:Y.a.window__button},o.a.createElement("div",{className:Y.a.window__button_action},o.a.createElement("button",{className:Y.a.button,onClick:function(){e.deleteProject()},type:"button",name:"button"},"Delete ")),o.a.createElement("div",{className:Y.a.window__button_action},o.a.createElement("button",{className:Y.a.button,onClick:function(){e.cancelDelete()},type:"button",name:"button"},"Cancel ")))))},$=n(3),ee=n.n($),te=Object(m.a)({form:"editForm",enableReinitialize:!1})((function(e){return console.log(e),o.a.createElement(o.a.Fragment,null,o.a.createElement("form",{className:Y.a.form,onSubmit:e.handleSubmit},o.a.createElement(u.a,{component:j,validate:[E,b],name:"titleEdit"}),o.a.createElement(u.a,{component:g,cols:"40",rows:"10",className:Y.a.textarea,validate:[E],name:"descriptionEdit"}),o.a.createElement("button",null,"Submit"),o.a.createElement("button",{onClick:function(){e.cancelEdit()}},"Cancel")))}));te.propTypes={projectsList:ee.a.object,cancelEdit:ee.a.func};var ne=te,ae=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1];return o.a.createElement("div",{className:Y.a.project__info},a&&o.a.createElement(Q,{cancelDelete:function(){c(!1)},deleteProject:function(){e.removeUsersProject(e.projectsList._id,e.token),c(!1)}}),!e.editFlag&&o.a.createElement("div",null,o.a.createElement("div",{className:Y.a.project__title},e.projectsList.title,o.a.createElement("div",null,o.a.createElement("button",{className:Y.a.button,onClick:function(){e.setEditMode(!0),e.setInitialValue(e.projectsList)}},"Edit")),o.a.createElement("div",null,o.a.createElement("button",{className:Y.a.button,onClick:function(e){c(!0)},type:"button",name:"button"},"Delete "))),o.a.createElement("div",{className:Y.a.project__description},e.projectsList.description)),e.editFlag&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(ne,{onSubmit:function(t){e.editUserProject(t.titleEdit,t.descriptionEdit.trim(),e.projectsList._id,e.token),e.setEditMode(!1)},projectsList:e.projectsList,cancelEdit:function(){e.setEditMode(!1)},initialValues:{titleEdit:e.initialValue.title,descriptionEdit:e.initialValue.description}}))))},re=function(e){return o.a.createElement("div",{className:Y.a.projects__container},o.a.createElement(ae,{initialValue:e.initialValue,editFlag:e.editFlag,setInitialValue:e.setInitialValue,setEditMode:e.setEditMode,token:e.token,removeUsersProject:e.removeUsersProject,editUserProject:e.editUserProject,projectsList:e.projectsList}))},oe={token:null,projectsList:[],status:null,initialValue:null,editFlag:null},ce=function(e){return console.log(e),{type:"GET_USERS_PROJECTS",data:e}},ie=function(e){return console.log(e),{type:"SET_INITIAL_VALE",el:e}},le=function(e){return console.log(e),{type:"FLAG",editFlag:e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USERS_PROJECTS":return Object(y.a)(Object(y.a)({},e),{},{projectsList:t.data});case"EDIT_STATUS":return Object(y.a)(Object(y.a)({},e),{},{status:t.status});case"SET_INITIAL_VALE":return Object(y.a)(Object(y.a)({},e),{},{initialValue:t.el});case"FLAG":return Object(y.a)(Object(y.a)({},e),{},{editFlag:t.editFlag});default:return e}},ue=n(289),me=n(285),de=n(288),pe=n(283),_e=n(291),fe=Object(pe.a)((function(e){return Object(_e.a)({root:{width:"100%"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},MuiButtonBaseroot:{width:"109px",height:"6px"}})})),je=Object(s.b)((function(e){return{token:e.login.token,projectsList:e.projects.projectsList,status:e.projects.status,initialValue:e.projects.initialValue,editFlag:e.projects.editFlag}}),{getUsersProjects:function(e){return function(){var t=Object(x.a)(N.a.mark((function t(n){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T(e);case 2:a=t.sent,n(ce(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},editUserProject:function(e,t,n,a){return function(){var r=Object(x.a)(N.a.mark((function r(o){var c;return N.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,I(e,t,n,a);case 2:c=r.sent,o(ce(c)),console.log(c);case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},removeUsersProject:function(e,t){return function(){var n=Object(x.a)(N.a.mark((function n(a){var r;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U(e,t);case 2:r=n.sent,a(ce(r));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setInitialValue:function(e){return function(){var t=Object(x.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(ie(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setEditMode:function(e){return function(){var t=Object(x.a)(N.a.mark((function t(n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(le(e));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(e){Object(r.useEffect)((function(){e.getUsersProjects(e.token)}),[]);var t=fe(),n=o.a.useState(!1),a=Object(l.a)(n,2),c=a[0],i=a[1];return e.token?o.a.createElement("div",{className:Y.a.projects},e.projectsList.map((function(n,a){return o.a.createElement("div",null,n.title,o.a.createElement(ue.a,{expanded:c===a,onChange:(r=a,function(e,t){i(!!t&&r)})},o.a.createElement(de.a,{"aria-controls":"panel1bh-content",id:"panel1bh-header",className:t.MuiButtonBaseroot},o.a.createElement("button",{className:Y.a.button,onClick:function(){e.setEditMode(!1)}},"Expander")),o.a.createElement(me.a,null,o.a.createElement(re,{initialValue:e.initialValue,editFlag:e.editFlag,setInitialValue:e.setInitialValue,setEditMode:e.setEditMode,key:a,removeUsersProject:e.removeUsersProject,getUsersProjects:e.getUsersProjects,token:e.token,editUserProject:e.editUserProject,projectsList:n}))));var r}))):o.a.createElement(v.a,{to:"/login"})})),ge=n(131),Ee=n.n(ge),be=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1];return o.a.createElement("div",{className:Ee.a.settings},o.a.createElement("input",{type:"checkbox",name:"name",onChange:function(){c(!a),e.triggerSearch(a)}}),o.a.createElement("span",null,"Light/Dark"))},ve=n(74),he=n.n(ve),we=function(e){return o.a.createElement("div",{className:he.a.main},o.a.createElement("div",{className:he.a.main__sidebar},o.a.createElement(B,null)),o.a.createElement("div",{className:he.a.main__general},o.a.createElement(v.b,{path:"/main/create-project",component:H}),o.a.createElement(v.b,{path:"/main/projects",render:function(){return o.a.createElement(o.a.Suspense,null,o.a.createElement(je,null))}}),o.a.createElement(v.b,{path:"/main/settings",render:function(){return o.a.createElement(o.a.Suspense,null,o.a.createElement(be,{triggerSearch:e.triggerSearch}))}})))},Se=n(7),Oe=n(132),ke=n(290),Ne=Object(Se.c)({projectCreator:W,login:M,projects:se,form:ke.a}),xe=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return void console.log(t)}}(),ye=Object(Se.d)(Ne,xe,Object(Se.a)(Oe.a));ye.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){console.log(n)}}(ye.getState())})),window.store=ye;var Ce=ye,Fe=function(){var e=Object(r.useState)(!0),t=Object(l.a)(e,2),n=t[0],a=t[1],c=function(e){localStorage.setItem("mode",e),a(e)};return o.a.createElement("div",{className:n?"container_light":"container_dark"},o.a.createElement(R.a,{basename:"/project-app"},o.a.createElement(s.a,{store:Ce},o.a.createElement(v.b,{exact:!0,path:"/",render:function(){return o.a.createElement(v.a,{to:"/login"})}}),o.a.createElement("div",null,o.a.createElement(v.b,{path:"/login",render:function(){return o.a.createElement(o.a.Suspense,null,o.a.createElement("div",{class:"container__login"},o.a.createElement(A,null)))}})),o.a.createElement("div",null,o.a.createElement(v.b,{path:"/main",render:function(){return o.a.createElement(o.a.Suspense,null,o.a.createElement("div",{className:"container__main"},o.a.createElement(we,{triggerSearch:c})))}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},44:function(e,t,n){e.exports={form:"project-creator_form__2oZgc",message:"project-creator_message__3iGSO",container:"project-creator_container__3GLji",info:"project-creator_info__2q9uX",textarea:"project-creator_textarea__1o76K",error:"project-creator_error__2O1FI"}},54:function(e,t,n){e.exports={login__page:"login_login__page__qgthF",form:"login_form__Fv0Ml",message:"login_message__2PgTH",container:"login_container__uZxKL",info:"login_info__3cpon"}},72:function(e,t,n){e.exports={form_control:"form-control_form_control__1RMN8",error:"form-control_error__218LK"}},74:function(e,t,n){e.exports={main:"main_main__3A9qg",main__sidebar:"main_main__sidebar__cU6C8",main__general:"main_main__general__5rodv"}},8:function(e,t,n){e.exports={projects:"project-general_projects__3kxkZ",projects__list:"project-general_projects__list__3cPdw",project__button:"project-general_project__button__1uOnt",button:"project-general_button__w-v8b",project__title:"project-general_project__title__1i0Gd",form:"project-general_form__3MrXX",message:"project-general_message__1jV2C",textarea:"project-general_textarea__auZGE",project__info:"project-general_project__info__2Qh6U",project__description:"project-general_project__description__92Iu8",modal:"project-general_modal__xj-aJ",modal__window:"project-general_modal__window__2dUx-",window__button:"project-general_window__button__BkcYn",window__title:"project-general_window__title__3aStG",active:"project-general_active__3eBHX"}}},[[136,1,2]]]);
//# sourceMappingURL=main.326ca9e1.chunk.js.map